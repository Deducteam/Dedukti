<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Meta (dedukti.Api.Meta)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.0.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">dedukti</a> &#x00BB; <a href="../index.html">Api</a> &#x00BB; Meta</nav><header class="odoc-preamble"><h1>Module <code><span>Api.Meta</span></code></h1><p>The <code>dkmeta</code> library is an extension of <code>dedukti</code> that allows the user to normalize terms according to meta rules. Meta rules are written in the <code>dedukti</code> syntax. <code>dkmeta</code> also offers a way to reify the syntax of <code>dedukti</code> in <code>dedukti</code>. This allows you to get around the limitations of the rewrite engine offers par Dedukti: you can rewrite products, static symbols... The overhead introduced by this reification is linear if you choose the <code>LF</code> encoding. However, you might create your own encoding for your own goals.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec module-type" id="module-type-ENCODING" class="anchored"><a href="#module-type-ENCODING" class="anchor"></a><code><span><span class="keyword">module</span> <span class="keyword">type</span> </span><span><a href="module-type-ENCODING/index.html">ENCODING</a></span><span> = <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-RNS" class="anchored"><a href="#module-RNS" class="anchor"></a><code><span><span class="keyword">module</span> </span><span>RNS</span><span> : <span class="xref-unresolved">Stdlib</span>.Set.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">elt</span> = <span class="xref-unresolved">Kernel</span>.Rule.rule_name</span></span></code></div></div><div class="odoc-spec"><div class="spec type" id="type-cfg" class="anchored"><a href="#type-cfg" class="anchor"></a><code><span><span class="keyword">type</span> cfg</span><span> = </span><span>{</span></code><table><tr id="type-cfg.meta_rules" class="anchored"><td class="def record field"><a href="#type-cfg.meta_rules" class="anchor"></a><code><span><span class="keyword">mutable</span> meta_rules : <span><span><span class="xref-unresolved">RNS</span>.t list</span> option</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Contains all the meta_rules.</p><span class="comment-delim">*)</span></td></tr><tr id="type-cfg.beta" class="anchored"><td class="def record field"><a href="#type-cfg.beta" class="anchor"></a><code><span>beta : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>If off, no beta reduction is allowed</p><span class="comment-delim">*)</span></td></tr><tr id="type-cfg.register_before" class="anchored"><td class="def record field"><a href="#type-cfg.register_before" class="anchor"></a><code><span>register_before : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>entries are registered before they have been normalized</p><span class="comment-delim">*)</span></td></tr><tr id="type-cfg.encode_meta_rules" class="anchored"><td class="def record field"><a href="#type-cfg.encode_meta_rules" class="anchor"></a><code><span>encode_meta_rules : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>The encoding is used on the meta rules first except for products</p><span class="comment-delim">*)</span></td></tr><tr id="type-cfg.encoding" class="anchored"><td class="def record field"><a href="#type-cfg.encoding" class="anchor"></a><code><span>encoding : <span><span>(<span class="keyword">module</span> <a href="module-type-ENCODING/index.html">ENCODING</a>)</span> option</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Set an encoding before normalization</p><span class="comment-delim">*)</span></td></tr><tr id="type-cfg.decoding" class="anchored"><td class="def record field"><a href="#type-cfg.decoding" class="anchor"></a><code><span>decoding : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>If false, the term is not decoded after normalization</p><span class="comment-delim">*)</span></td></tr><tr id="type-cfg.env" class="anchored"><td class="def record field"><a href="#type-cfg.env" class="anchor"></a><code><span>env : <a href="../Env/index.html#type-t">Env.t</a>;</span></code></td></tr></table><code><span>}</span></code></div><div class="spec-doc"><p><code>cfg</code> configures <code>dkmeta</code>. <code>meta_rules</code> contains all the rules used for normalization. If <code>meta_rules</code> = None, then all the rules in the signature <code>sg</code> are used. It is left to the user to add the <code>meta_rules</code> in the signature. If you use an encoding, you have to add manually the signature of the encoding in the meta signature <code>sg</code>. Besides, all the meta_rules should be encoded beforethey are added in the signature. At the moment, <code>dkmeta</code> offers only one encoding. <code>dkmeta</code> nor <code>dedukti</code> won't check that the <code>meta rules</code> you add can be applied or not. If the normalization succeeded but you did not get the exepected result, probably that the rule was not in the signature. Be careful that the signature you use to normalize terms is not the same than the one you will use to type check your terms.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-default_config" class="anchored"><a href="#val-default_config" class="anchor"></a><code><span><span class="keyword">val</span> default_config : <a href="#type-cfg">cfg</a></span></code></div><div class="spec-doc"><p>Initliaze a configuration with the following parameters: <code>meta_rules</code> = None <code>beta</code> = true <code>encoding</code> = None <code>env</code> = empty_signature (in particular the name is the empty string)</p></div></div><div class="odoc-spec"><div class="spec value" id="val-red_cfg" class="anchored"><a href="#val-red_cfg" class="anchor"></a><code><span><span class="keyword">val</span> red_cfg : <span><a href="#type-cfg">cfg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Kernel/Reduction/index.html#type-red_cfg">Kernel.Reduction.red_cfg</a> list</span></span></code></div><div class="spec-doc"><p>Transform a <code>dkmeta</code> cfg to a <code>red_cfg</code> that can be used by the Rewrite Engine of Dedukti.</p></div></div><div class="odoc-spec"><div class="spec module" id="module-LF" class="anchored"><a href="#module-LF" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="LF/index.html">LF</a></span><span> : <a href="module-type-ENCODING/index.html">ENCODING</a></span></code></div><div class="spec-doc"><p>Prefix each subterm with its construtor</p></div></div><div class="odoc-spec"><div class="spec module" id="module-PROD" class="anchored"><a href="#module-PROD" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="PROD/index.html">PROD</a></span><span> : <a href="module-type-ENCODING/index.html">ENCODING</a></span></code></div><div class="spec-doc"><p>Encodes products with HOAS</p></div></div><div class="odoc-spec"><div class="spec module" id="module-APP" class="anchored"><a href="#module-APP" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="APP/index.html">APP</a></span><span> : <a href="module-type-ENCODING/index.html">ENCODING</a></span></code></div><div class="spec-doc"><p>Same as <code>LF</code> with type informations for application on product only.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-debug_flag" class="anchored"><a href="#val-debug_flag" class="anchor"></a><code><span><span class="keyword">val</span> debug_flag : <a href="../../Kernel/Basic/Debug/index.html#type-flag">Kernel.Basic.Debug.flag</a></span></code></div></div><div class="odoc-spec"><div class="spec module" id="module-MetaConfiguration" class="anchored"><a href="#module-MetaConfiguration" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="MetaConfiguration/index.html">MetaConfiguration</a></span><span> : <a href="../Processor/module-type-S/index.html">Processor.S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../Processor/module-type-S/index.html#type-t">t</a> = <span><a href="../../Kernel/Rule/index.html#type-partially_typed_rule">Kernel.Rule.partially_typed_rule</a> list</span></span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-meta_of_rules" class="anchored"><a href="#val-meta_of_rules" class="anchor"></a><code><span><span class="keyword">val</span> meta_of_rules : <span>?staged:bool <span class="arrow">&#45;&gt;</span></span> <span><span><a href="../../Kernel/Rule/index.html#type-partially_typed_rule">Kernel.Rule.partially_typed_rule</a> list</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cfg">cfg</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-cfg">cfg</a></span></code></div><div class="spec-doc"><p><code>meta_of_rules rs cfg</code> adds the meta_rules <code>rs</code> in the configuration <code>cfg</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-meta_of_files" class="anchored"><a href="#val-meta_of_files" class="anchor"></a><code><span><span class="keyword">val</span> meta_of_files : <span>?cfg:<a href="#type-cfg">cfg</a> <span class="arrow">&#45;&gt;</span></span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-cfg">cfg</a></span></code></div><div class="spec-doc"><p><code>meta_of_files ?cfg files</code> returns a configuration from the meta rules declares in the files <code>files</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-make_meta_processor" class="anchored"><a href="#val-make_meta_processor" class="anchor"></a><code><span><span class="keyword">val</span> make_meta_processor : <span><a href="#type-cfg">cfg</a> <span class="arrow">&#45;&gt;</span></span> <span>post_processing:<span>(<span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Parsers/Entry/index.html#type-entry">Parsers.Entry.entry</a> <span class="arrow">&#45;&gt;</span></span> unit)</span> <span class="arrow">&#45;&gt;</span></span>
<span>(<span class="keyword">module</span> <a href="../Processor/module-type-S/index.html">Processor.S</a> <span class="keyword">with</span> <span class="keyword">type</span> <a href="../Processor/module-type-S/index.html#type-t">t</a> = unit)</span></span></code></div></div><div class="odoc-spec"><div class="spec value" id="val-mk_term" class="anchored"><a href="#val-mk_term" class="anchor"></a><code><span><span class="keyword">val</span> mk_term : <span><a href="#type-cfg">cfg</a> <span class="arrow">&#45;&gt;</span></span> <span>?env:<a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Kernel/Term/index.html#type-term">Kernel.Term.term</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Kernel/Term/index.html#type-term">Kernel.Term.term</a></span></code></div><div class="spec-doc"><p><code>mk_term cfg ?env term</code> normalize a term according to the configuration <code>cfg</code></p></div></div><div class="odoc-spec"><div class="spec value" id="val-mk_entry" class="anchored"><a href="#val-mk_entry" class="anchor"></a><code><span><span class="keyword">val</span> mk_entry : <span><a href="../Env/index.html#type-t">Env.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-cfg">cfg</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../Parsers/Entry/index.html#type-entry">Parsers.Entry.entry</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../Parsers/Entry/index.html#type-entry">Parsers.Entry.entry</a></span></code></div><div class="spec-doc"><p><code>mk_entry env cfg entry</code> processes an entry according the meta configuration <code>cfg</code> and the current environment <code>env</code></p></div></div><div class="odoc-spec"><div class="spec type extension" id="extension-decl-MetaRules" class="anchored"><a href="#extension-decl-MetaRules" class="anchor"></a><code><span><span class="keyword">type</span> <a href="../Processor/index.html#type-t">Processor.t</a> += </span></code><table><tr id="extension-MetaRules" class="anchored"><td class="def extension"><a href="#extension-MetaRules" class="anchor"></a><code><span>| </span><span><span class="extension">MetaRules</span> : <span><span><a href="../../Kernel/Rule/index.html#type-partially_typed_rule">Kernel.Rule.partially_typed_rule</a> list</span> <a href="../Processor/index.html#type-t">Processor.t</a></span></span></code></td></tr></table></div></div></div></body></html>